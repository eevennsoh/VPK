"use client";

import React, { useState } from "react";
import { token } from "@atlaskit/tokens";
import { IconButton } from "@atlaskit/button/new";
import Button from "@atlaskit/button/new";
import SearchResultCard from "./components/search-result-card";
import AISummaryPanel from "./components/ai-summary-panel";
import FilterPanel from "./components/filter-panel";
import { MOCK_RESULTS } from "./data/mock-results";
import { SEARCH_TERMS } from "./data/search-terms";

// Icons
import FilterIcon from "@atlaskit/icon/core/filter";
import CalendarIcon from "@atlaskit/icon/core/calendar";
import FileIcon from "@atlaskit/icon/core/file";
import PersonIcon from "@atlaskit/icon/core/person";
import ChevronDownIcon from "@atlaskit/icon/core/chevron-down";

export default function SearchResultsView() {
	const [selectedFilter, setSelectedFilter] = useState("all");

	// Filter results based on selected filter
	const filteredResults = selectedFilter === "all" ? MOCK_RESULTS : MOCK_RESULTS.filter((result) => result.type === selectedFilter);

	return (
		<div style={{ height: "calc(100vh - 48px)", display: "flex", flexDirection: "column" }}>
			{/* Filter Buttons Section */}
			<div
				style={{
					paddingTop: token("space.200"),
					paddingBottom: token("space.200"),
					display: "flex",
					justifyContent: "center",
					borderBottom: `1px solid ${token("color.border")}`,
				}}
			>
				<div style={{ width: "1104px", display: "flex", gap: token("space.100"), paddingLeft: "8px", paddingRight: "8px" }}>
					{/* Filter icon button */}
					<IconButton icon={FilterIcon} label="Filter" appearance="subtle" />

					{/* Last updated button */}
					<Button appearance="default" iconBefore={CalendarIcon} iconAfter={(iconProps) => <ChevronDownIcon {...iconProps} />}>
						Last updated
					</Button>

					{/* Type button */}
					<Button appearance="default" iconBefore={FileIcon} iconAfter={(iconProps) => <ChevronDownIcon {...iconProps} />}>
						Type
					</Button>

					{/* Contributor button */}
					<Button appearance="default" iconBefore={PersonIcon} iconAfter={(iconProps) => <ChevronDownIcon {...iconProps} />}>
						Contributor
					</Button>
				</div>
			</div>

			{/* Main Content - Two Column Layout */}
			<div
				style={{
					flex: 1,
					display: "flex",
					justifyContent: "center",
					overflowY: "auto",
				}}
			>
				<div
					style={{
						width: "1104px",
						paddingLeft: "8px",
						paddingRight: "8px",
						display: "flex",
						gap: "64px",
						paddingTop: token("space.200"),
					}}
				>
					{/* Left Column - Results */}
					<div
						style={{
							width: "768px",
							paddingTop: token("space.100"),
							paddingBottom: "20px",
						}}
					>
						<div style={{ display: "flex", flexDirection: "column", gap: token("space.300") }}>
							{/* AI Summary Panel */}
							<AISummaryPanel defaultExpanded={false} />

							{filteredResults.map((result) => (
								<SearchResultCard
									key={result.id}
									icon={result.icon}
									iconColor={result.iconColor}
									title={result.title}
									metadata={result.metadata}
									excerpt={result.excerpt}
									searchTerms={[...SEARCH_TERMS]}
									onClick={() => {
										// Click handler - implement navigation as needed
									}}
								/>
							))}
						</div>
					</div>

					{/* Right Column - Filters */}
					<FilterPanel selectedFilter={selectedFilter} onFilterChange={setSelectedFilter} />
				</div>
			</div>
		</div>
	);
}
